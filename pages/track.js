import Head from "next/head";
import { Header } from "../components/Header";
import { Footer } from "../components/Footer";
import { useWorkItemContext } from "../contexts/workItemProvider";
import { Table } from "../components/Table";

import { EditWorkItem } from "../components/EditWorkItem";
import { AddWorkItem } from "../components/AddWorkItem";
import { useOverlayContext } from "../contexts/overlayProvider";

export default function Track() {
  //import workitemprovider and distrubte to table components
  const [workItemList, insertWorkItem, setWorkItemList, updateWorkItem] =
    useWorkItemContext();
  const [
    isOverlayOpen,
    openOverlay,
    closeOverlay,
    isTableEditMode,
    handleEditButtonClick,
    initialAddValue,
    isEditMode,
    setIsEditMode,
    handleEditButtonSingleItemClick,
  ] = useOverlayContext();
  return (
    <>
      <Head>
        <title>Track</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Header header="Track work"></Header>
      <button onClick={openOverlay} disabled={isOverlayOpen}>
        Add
      </button>
      {isOverlayOpen ? (
        <AddWorkItem
          initialAddValue={isEditMode ? initialAddValue : null}
          handleCloseClick={closeOverlay}
          isEditMode={isEditMode}
        />
      ) : null}
      <EditWorkItem
        handleClick={handleEditButtonClick}
        isOverlayOpen={isOverlayOpen}
      />
      <Table
        data={workItemList}
        setData={setWorkItemList}
        hasCheckbox={true}
        width={"100%"}
        isTableEditMode={isTableEditMode}
        handleEditItemClick={handleEditButtonSingleItemClick}
        isOverlayOpen={isOverlayOpen}
      ></Table>
      <Footer></Footer>
    </>
  );
}
